{"ast":null,"code":"export default {\n  name: \"game\",\n  data() {\n    return {\n      // 批量删除\n      multipleSelection: [],\n      // 文件上传\n      fileList: [],\n      // 增加表单\n      dialogFormVisible: false,\n      form: {},\n      //\n      input: \"\",\n      tableData: [],\n      total: 0,\n      params: {\n        name: '',\n        pageNum: 1,\n        pageSize: 5\n      },\n      activeName: 'first',\n      typeobjes: []\n    };\n  },\n  watch: {},\n  methods: {\n    // 寻找类型\n    findTypes() {\n      request.get(\"/kind\").then(res => {\n        if (res.code === '0') {\n          console.log(res);\n          this.typeobjes = res.data;\n        } else {\n          this.$message.error(res.msg);\n        }\n      });\n    },\n    // 导入导出\n    exp() {\n      let user = localStorage.getItem(\"user\");\n      location.href = 'http://localhost:9090/punk/commodity/export?token=' + JSON.parse(user).token;\n    },\n    // 导入\n    importFile(res) {\n      if (res.code === '0') {\n        this.$message.success(\"批量导入成功\");\n        this.findBySearch();\n      } else {\n        this.$message.success(\"导入内容有误\");\n        this.$message.error(res.msg);\n      }\n    },\n    // 批量导入文件\n    // 上传文件\n    successUpload(res) {\n      this.form.img = res.data;\n    },\n    getRowKeys(row) {\n      return row.id;\n    },\n    // 多选删除按钮操作 begin\n    handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n    delBatch() {\n      if (this.multipleSelection.length === 0) {\n        this.$message.warning(\"请勾选您要删除的项\");\n      } else {\n        request.put(\"/commodity/deleteList\", this.multipleSelection).then(res => {\n          if (res.code === '0') {\n            this.$message.success(\"批量删除成功\");\n            this.findBySearch();\n          } else {\n            this.$message.error(res.msg);\n          }\n        });\n      }\n    },\n    handleClick(row) {\n      console.log(row);\n    },\n    handleEdit(row) {\n      this.form = row;\n      this.dialogFormVisible = true;\n    },\n    submitCommodity() {\n      request.post(\"/commodity\", this.form).then(res => {\n        if (res.code === '0') {\n          this.$message({\n            message: '增加成功',\n            type: 'success'\n          });\n          this.dialogFormVisible = false;\n          this.findBySearch();\n        } else {\n          this.$message({\n            message: res.msg,\n            type: 'success'\n          });\n        }\n      });\n    },\n    handleDelete(id) {\n      request.delete(\"/commodity/\" + id).then(res => {\n        if (res.code === '0') {\n          this.$message({\n            message: '删除成功',\n            type: 'success'\n          });\n          this.findBySearch();\n        } else {\n          this.$message({\n            message: res.msg,\n            type: 'success'\n          });\n        }\n      });\n    },\n    handleSizeChange(pageSize) {\n      this.params.pageSize = pageSize;\n      this.findBySearch();\n    },\n    handleCurrentChange(pageNum) {\n      this.params.pageNum = pageNum;\n      this.findBySearch();\n    },\n    // load(){\n    //   request.get(\"/user\").then(res=>{\n    //     if (res.code === '0'){\n    //       this.tableData = res.data;\n    //     }\n    //   })\n    // },\n    addCommodity() {\n      this.form = {};\n      this.dialogFormVisible = true;\n    },\n    findBySearch() {\n      request.get(\"/commodity/search\", {\n        params: this.params\n      }).then(res => {\n        if (res.code === '0') {\n          this.tableData = res.data.list;\n          this.total = res.data.total;\n        } else {\n          this.$message({\n            message: res.msg,\n            type: 'error'\n          });\n        }\n      });\n    }\n  },\n  created() {\n    this.findBySearch();\n    this.findTypes();\n  }\n};","map":{"version":3,"names":["name","data","multipleSelection","fileList","dialogFormVisible","form","input","tableData","total","params","pageNum","pageSize","activeName","typeobjes","watch","methods","findTypes","request","get","then","res","code","console","log","$message","error","msg","exp","user","localStorage","getItem","location","href","JSON","parse","token","importFile","success","findBySearch","successUpload","img","getRowKeys","row","id","handleSelectionChange","val","delBatch","length","warning","put","handleClick","handleEdit","submitCommodity","post","message","type","handleDelete","delete","handleSizeChange","handleCurrentChange","addCommodity","list","created"],"sources":["src/views/manager/Game/Game.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"search\">\r\n      <el-input placeholder=\"请输入账号查询\" style=\"width: 200px; margin-right: 10px\" v-model=\"params.name\"></el-input>\r\n      <el-button type=\"info\" plain style=\"margin-left: 10px\"  @click=\"findBySearch\">查询</el-button>\r\n      <el-button type=\"warning\" plain style=\"margin-left: 10px\" @click=\"reset\">重置</el-button>\r\n    </div>\r\n\r\n    <div class=\"operation\">\r\n      <el-button type=\"primary\" plain  @click=\"addCommodity\">新增</el-button>\r\n      <el-popconfirm title=\"确定删除这些数据吗？\" @confirm=\"delBatch()\">\r\n        <el-button slot=\"reference\" type=\"danger\" style=\"margin-left: 5px\">批量删除</el-button>\r\n      </el-popconfirm>\r\n    </div>\r\n\r\n    <div class=\"table\">\r\n      <el-table :data=\"tableData\" strip @selection-change=\"handleSelectionChange\">\r\n        <el-table-column type=\"selection\" width=\"55\" align=\"center\"></el-table-column>\r\n        <el-table-column prop=\"id\" label=\"序号\" width=\"70\" align=\"center\" sortable></el-table-column>\r\n        <el-table-column prop=\"name\" label=\"账号\"></el-table-column>\r\n        <el-table-column prop=\"creater\" label=\"姓名\"></el-table-column>\r\n        <el-table-column prop=\"introduce\" label=\"电话\"></el-table-column>\r\n        <el-table-column prop=\"price\" label=\"邮箱\"></el-table-column>\r\n        <el-table-column label=\"头像\">\r\n          <template v-slot=\"scope\">\r\n            <div style=\"display: flex; align-items: center\">\r\n              <el-image style=\"width: 40px; height: 40px; border-radius: 50%\" v-if=\"scope.row.avatar\"\r\n                        :src=\"scope.row.avatar\" :preview-src-list=\"[scope.row.avatar]\"></el-image>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"role\" label=\"角色\"></el-table-column>\r\n        <el-table-column prop=\"sex\" label=\"性别\"></el-table-column>\r\n        <el-table-column prop=\"info\" label=\"个人简介\" show-overflow-tooltip></el-table-column>\r\n        <el-table-column prop=\"birth\" label=\"生日\"></el-table-column>\r\n        <el-table-column label=\"操作\" align=\"center\" width=\"180\">\r\n          <template v-slot=\"scope\">\r\n            <el-button size=\"mini\" type=\"primary\" plain @click=\"handleEdit(scope.row)\">编辑</el-button>\r\n            <el-button size=\"mini\" type=\"danger\" plain @click=\"handleDelete(scope.row.id)\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <div class=\"pagination\">\r\n        <el-pagination\r\n            style=\"margin-top: 10px\"\r\n            @size-change=\"handleSizeChange\"\r\n            @current-change=\"handleCurrentChange\"\r\n            :current-page=\"params.pageNum\"\r\n            :page-sizes=\"[5, 10, 20, 30]\"\r\n            :page-size=\"params.pageSize\"\r\n            layout=\"total, sizes, prev, pager, next\"\r\n            :total=\"total\">\r\n        </el-pagination>\r\n      </div>\r\n    </div>\r\n\r\n\r\n    <el-dialog title=\"用户信息\" :visible.sync=\"fromVisible\" width=\"40%\" :close-on-click-modal=\"false\" destroy-on-close>\r\n      <el-form :model=\"form\" label-width=\"100px\" style=\"padding-right: 50px\" :rules=\"rules\" ref=\"formRef\">\r\n        <el-form-item label=\"用户名\" prop=\"username\">\r\n          <el-input v-model=\"form.username\" placeholder=\"用户名\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"姓名\" prop=\"name\">\r\n          <el-input v-model=\"form.name\" placeholder=\"姓名\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"电话\" prop=\"phone\">\r\n          <el-input v-model=\"form.phone\" placeholder=\"电话\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input v-model=\"form.email\" placeholder=\"邮箱\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"头像\">\r\n          <el-upload\r\n              class=\"avatar-uploader\"\r\n              :action=\"$baseUrl + '/files/upload'\"\r\n              :headers=\"{ token: user.token }\"\r\n              list-type=\"picture\"\r\n              :on-success=\"handleAvatarSuccess\"\r\n          >\r\n            <el-button type=\"primary\">上传头像</el-button>\r\n          </el-upload>\r\n        </el-form-item>\r\n        <el-form-item label=\"性别\" prop=\"sex\">\r\n          <el-radio-group v-model=\"form.sex\">\r\n            <el-radio label=\"男\"></el-radio>\r\n            <el-radio label=\"女\"></el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"个人简介\" prop=\"info\">\r\n          <el-input type=\"textarea\" v-model=\"form.info\" placeholder=\"个人简介\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"生日\" prop=\"birth\">\r\n          <el-date-picker value-format=\"yyyy-MM-dd\" format=\"yyyy-MM-dd\" v-model=\"form.birth\" style=\"width: 100%\"></el-date-picker>\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitCommodity()\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"game\",\r\n  data() {\r\n    return {\r\n      // 批量删除\r\n      multipleSelection: [],\r\n      // 文件上传\r\n      fileList:[],\r\n      // 增加表单\r\n      dialogFormVisible:false,\r\n      form:{},\r\n      //\r\n      input:\"\",\r\n      tableData: [],\r\n      total:0,\r\n      params:{\r\n        name: '',\r\n        pageNum:1,\r\n        pageSize:5\r\n      },\r\n      activeName:'first',\r\n      typeobjes:[]\r\n    }\r\n  },\r\n  watch:{\r\n\r\n  },\r\n  methods: {\r\n    // 寻找类型\r\n    findTypes(){\r\n      request.get(\"/kind\").then(res => {\r\n        if (res.code === '0') {\r\n          console.log(res)\r\n          this.typeobjes = res.data;\r\n        } else {\r\n          this.$message.error(res.msg)\r\n        }\r\n      })\r\n    },\r\n    // 导入导出\r\n    exp(){\r\n      let user = localStorage.getItem(\"user\");\r\n      location.href = 'http://localhost:9090/punk/commodity/export?token=' + JSON.parse(user).token\r\n    },\r\n    // 导入\r\n    importFile(res){\r\n      if (res.code === '0') {\r\n        this.$message.success(\"批量导入成功\")\r\n        this.findBySearch()\r\n      } else {\r\n        this.$message.success(\"导入内容有误\")\r\n        this.$message.error(res.msg)\r\n      }\r\n    },\r\n\r\n    // 批量导入文件\r\n    // 上传文件\r\n    successUpload(res){\r\n      this.form.img = res.data;\r\n    },\r\n\r\n    getRowKeys(row){\r\n      return row.id;\r\n    },\r\n    // 多选删除按钮操作 begin\r\n    handleSelectionChange(val) {\r\n      this.multipleSelection = val;\r\n    },\r\n    delBatch(){\r\n      if (this.multipleSelection.length === 0) {\r\n        this.$message.warning(\"请勾选您要删除的项\")\r\n      }else {\r\n        request.put(\"/commodity/deleteList\",this.multipleSelection).then(res=>{\r\n          if (res.code === '0') {\r\n            this.$message.success(\"批量删除成功\")\r\n            this.findBySearch()\r\n          } else {\r\n            this.$message.error(res.msg)\r\n          }\r\n        })\r\n      }\r\n    },\r\n\r\n    handleClick(row) {\r\n      console.log(row);\r\n    },\r\n    handleEdit(row){\r\n      this.form = row;\r\n      this.dialogFormVisible = true;\r\n    },\r\n    submitCommodity(){\r\n      request.post(\"/commodity\",this.form).then(res=>{\r\n        if (res.code === '0') {\r\n          this.$message({\r\n            message: '增加成功',\r\n            type: 'success'\r\n          });\r\n          this.dialogFormVisible = false;\r\n          this.findBySearch();\r\n        } else {\r\n          this.$message({\r\n            message: res.msg,\r\n            type: 'success'\r\n          });\r\n        }\r\n      })\r\n    },\r\n    handleDelete(id){\r\n      request.delete(\"/commodity/\" + id).then(res => {\r\n        if (res.code === '0') {\r\n          this.$message({\r\n            message: '删除成功',\r\n            type: 'success'\r\n          });\r\n          this.findBySearch();\r\n        } else {\r\n          this.$message({\r\n            message: res.msg,\r\n            type: 'success'\r\n          });\r\n        }\r\n      })\r\n    },\r\n    handleSizeChange(pageSize){\r\n      this.params.pageSize = pageSize;\r\n      this.findBySearch();\r\n    },\r\n    handleCurrentChange(pageNum){\r\n      this.params.pageNum = pageNum;\r\n      this.findBySearch();\r\n    },\r\n    // load(){\r\n    //   request.get(\"/user\").then(res=>{\r\n    //     if (res.code === '0'){\r\n    //       this.tableData = res.data;\r\n    //     }\r\n    //   })\r\n    // },\r\n    addCommodity(){\r\n      this.form = {};\r\n      this.dialogFormVisible = true;\r\n    },\r\n\r\n    findBySearch(){\r\n      request.get(\"/commodity/search\",{\r\n        params:this.params\r\n      }).then(res=>{\r\n        if (res.code === '0'){\r\n          this.tableData = res.data.list;\r\n          this.total = res.data.total;\r\n        }else{\r\n          this.$message({\r\n            message: res.msg,\r\n            type: 'error'\r\n          });\r\n        }\r\n      })\r\n    }\r\n  },\r\n\r\n  created() {\r\n    this.findBySearch()\r\n    this.findTypes()\r\n  }\r\n\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"],"mappings":"AA4GA;EACAA,IAAA;EACAC,KAAA;IACA;MACA;MACAC,iBAAA;MACA;MACAC,QAAA;MACA;MACAC,iBAAA;MACAC,IAAA;MACA;MACAC,KAAA;MACAC,SAAA;MACAC,KAAA;MACAC,MAAA;QACAT,IAAA;QACAU,OAAA;QACAC,QAAA;MACA;MACAC,UAAA;MACAC,SAAA;IACA;EACA;EACAC,KAAA,GAEA;EACAC,OAAA;IACA;IACAC,UAAA;MACAC,OAAA,CAAAC,GAAA,UAAAC,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACAC,OAAA,CAAAC,GAAA,CAAAH,GAAA;UACA,KAAAP,SAAA,GAAAO,GAAA,CAAAnB,IAAA;QACA;UACA,KAAAuB,QAAA,CAAAC,KAAA,CAAAL,GAAA,CAAAM,GAAA;QACA;MACA;IACA;IACA;IACAC,IAAA;MACA,IAAAC,IAAA,GAAAC,YAAA,CAAAC,OAAA;MACAC,QAAA,CAAAC,IAAA,0DAAAC,IAAA,CAAAC,KAAA,CAAAN,IAAA,EAAAO,KAAA;IACA;IACA;IACAC,WAAAhB,GAAA;MACA,IAAAA,GAAA,CAAAC,IAAA;QACA,KAAAG,QAAA,CAAAa,OAAA;QACA,KAAAC,YAAA;MACA;QACA,KAAAd,QAAA,CAAAa,OAAA;QACA,KAAAb,QAAA,CAAAC,KAAA,CAAAL,GAAA,CAAAM,GAAA;MACA;IACA;IAEA;IACA;IACAa,cAAAnB,GAAA;MACA,KAAAf,IAAA,CAAAmC,GAAA,GAAApB,GAAA,CAAAnB,IAAA;IACA;IAEAwC,WAAAC,GAAA;MACA,OAAAA,GAAA,CAAAC,EAAA;IACA;IACA;IACAC,sBAAAC,GAAA;MACA,KAAA3C,iBAAA,GAAA2C,GAAA;IACA;IACAC,SAAA;MACA,SAAA5C,iBAAA,CAAA6C,MAAA;QACA,KAAAvB,QAAA,CAAAwB,OAAA;MACA;QACA/B,OAAA,CAAAgC,GAAA,+BAAA/C,iBAAA,EAAAiB,IAAA,CAAAC,GAAA;UACA,IAAAA,GAAA,CAAAC,IAAA;YACA,KAAAG,QAAA,CAAAa,OAAA;YACA,KAAAC,YAAA;UACA;YACA,KAAAd,QAAA,CAAAC,KAAA,CAAAL,GAAA,CAAAM,GAAA;UACA;QACA;MACA;IACA;IAEAwB,YAAAR,GAAA;MACApB,OAAA,CAAAC,GAAA,CAAAmB,GAAA;IACA;IACAS,WAAAT,GAAA;MACA,KAAArC,IAAA,GAAAqC,GAAA;MACA,KAAAtC,iBAAA;IACA;IACAgD,gBAAA;MACAnC,OAAA,CAAAoC,IAAA,oBAAAhD,IAAA,EAAAc,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAG,QAAA;YACA8B,OAAA;YACAC,IAAA;UACA;UACA,KAAAnD,iBAAA;UACA,KAAAkC,YAAA;QACA;UACA,KAAAd,QAAA;YACA8B,OAAA,EAAAlC,GAAA,CAAAM,GAAA;YACA6B,IAAA;UACA;QACA;MACA;IACA;IACAC,aAAAb,EAAA;MACA1B,OAAA,CAAAwC,MAAA,iBAAAd,EAAA,EAAAxB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAG,QAAA;YACA8B,OAAA;YACAC,IAAA;UACA;UACA,KAAAjB,YAAA;QACA;UACA,KAAAd,QAAA;YACA8B,OAAA,EAAAlC,GAAA,CAAAM,GAAA;YACA6B,IAAA;UACA;QACA;MACA;IACA;IACAG,iBAAA/C,QAAA;MACA,KAAAF,MAAA,CAAAE,QAAA,GAAAA,QAAA;MACA,KAAA2B,YAAA;IACA;IACAqB,oBAAAjD,OAAA;MACA,KAAAD,MAAA,CAAAC,OAAA,GAAAA,OAAA;MACA,KAAA4B,YAAA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACAsB,aAAA;MACA,KAAAvD,IAAA;MACA,KAAAD,iBAAA;IACA;IAEAkC,aAAA;MACArB,OAAA,CAAAC,GAAA;QACAT,MAAA,OAAAA;MACA,GAAAU,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAd,SAAA,GAAAa,GAAA,CAAAnB,IAAA,CAAA4D,IAAA;UACA,KAAArD,KAAA,GAAAY,GAAA,CAAAnB,IAAA,CAAAO,KAAA;QACA;UACA,KAAAgB,QAAA;YACA8B,OAAA,EAAAlC,GAAA,CAAAM,GAAA;YACA6B,IAAA;UACA;QACA;MACA;IACA;EACA;EAEAO,QAAA;IACA,KAAAxB,YAAA;IACA,KAAAtB,SAAA;EACA;AAGA"},"metadata":{},"sourceType":"module","externalDependencies":[]}